<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="css/bootstrap-responsive.min.css" rel="stylesheet">

    <title>Twitter classification</title>

    <script src="/js/jquery.min.js" type="text/javascript"></script>
    <script src="/js/jquery.dataTables.js" type="text/javascript"></script>
    <script src="/js/json2.js" type="text/javascript"></script>
    <script src="/js/underscore.js" type="text/javascript"></script>
    <script src="/js/backbone.js" type="text/javascript"></script>
    <script src="/js/bootstrap.js" type="text/javascript"></script>
</head>
<script type="text/javascript">
    /*
     Twits = Backbone.Model.extend({
     defaults: {text: "", score: "" },

     initialize: function () {

     },

     data: '<twits<twit<twitter_id>294338319549087745</twitter_id<text>RT Retweet if you wore Nike today!</text</twit<twit<twitter_id>294338318886395906</twitter_id<text>Nike bout to be hiring... He can apply. . . LMFAO</text</twit</twits>'

     });

     var twit = new Twits();

     View = Backbone.View.extend({
     initialize: function () {
     console.log("I'm initializing the view... ")
     },

     el: "#twit",

     events: {
     "click button": "render"
     },

     render: function () {
     var datas = this.model.get("data");
     console.log("rendering... ")
     console.log(datas)
     }
     })

     var view = new View({
     model: twit
     });

     */
</script>
<script type="text/javascript" id="">
    //JQUERY PURE

    $.extend($.fn.dataTableExt.oStdClasses, {
        "sWrapper": "dataTables_wrapper form-inline"
    });

    $(document).ready(function () {
        oTable = $('#table').dataTable({
            "aaSorting": [
                [ 1, "desc" ]
            ],
            //sPaginationType: "none",
            "iDisplayLength": 500,
            aoColumns: [
                /* Id */ {bVisible: false}, //{sWidth: "15%"},
                /* Text */ {sWidth: "40%"},
                /* Score */ {sWidth: "10%"},
                /* Reference score */ {sWidth: "10%"}
            ],
            /*sDom: "<'row'<'span9'><'span3'f>r>t<'row'<'span10'i><'span2'p>>"*/
            sDom: "<'row'<'span9'><'span3'f>r>t<'row'<'span10'><'span2'>>"

        });

        $("#searchInput").keypress(function (event) {
            if (event.which == 13) {
                value = $("#searchInput").prop('value');

                $.ajax('http://localhost:8888/classification?lang=en&search=' + value)
                        .done(function (data) {
                            alert("success");
                            var obj = JSON.parse(data)

                            oTable.fnClearTable();
                            oTable.fnAddData(obj.aaData);
                        })
                        .fail(function () {
                            alert("error");
                        })
                ;
                /*$.get('http://localhost:8888/classification?lang=en&search=' + value, function (data) {
                 var obj = JSON.parse(data)

                 oTable.fnClearTable();
                 oTable.fnAddData(obj.aaData);

                 }); */
            }

        });
        $("#searchInput").focus()

        /*$("#searchButton").bind("click", function () {
         value = $("#searchInput").prop('value');
         $.get('http://localhost:8888/classification?lang=en&search=' + value, function (data) {
         var obj = JSON.parse(data)

         oTable.fnClearTable();
         oTable.fnAddData(obj.aaData);

         });
         });*/


    });


</script>
<body>
<div class="container">

    <legend>Vento-web: twitter live</legend>

    <!--form class="form-search"-->
    <input id="searchInput" type="text" class="input-medium search-query" placeholder="Search on twitter">
    <!--<!--<button id="searchButton" type="submit" class="btn">Search</button>-->
    <!--</form>-->

    <table id="table" class="table table-striped">
        <thead>
        <tr>
            <th>Id</th>
            <th>Text</th>
            <th>Score</th>
            <th>Reference score</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        </tbody>
    </table>


    <!--button>Bao</button>
    <div class="twit"/-->
</div>


</body>
</html>